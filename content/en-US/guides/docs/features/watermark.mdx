import VersionBadge from '@/components/version-badge'
import FeatureMeta from '@/components/feature-meta'
import Showcase from '@/showcase/docs/watermark'

# Watermark <VersionBadge version="0.4.2+" />

<FeatureMeta texts={['✅', '-', '-', '-', '❌ import via plugins' ]} />

The watermark feature is designed to provide a flexible and secure watermark solution for web pages or applications. With this feature, developers can dynamically generate text or image watermarks on the page to prevent unauthorized use or dissemination of content. It supports multiple configurations.

<Showcase lang="en-US" toolbar={{ showCode: true }} />

Watermark supports three settings: UI interface, FacadeAPI, and plug-in configuration.
Three types of watermarks are supported: user information type, custom image type, and custom text type. The display of watermarks only supports one type of display, and the priority is user information type > custom image type > custom text type.

## Presets Installation

```shell npm2yarn
npm install @univerjs/watermark
```

```typescript {4,6,8,23}
import { createUniver, defaultTheme, LocaleType, merge } from '@univerjs/presets';
import { UniverDocsCorePreset } from '@univerjs/presets/preset-docs-core';
import UniverPresetDocsCoreEnUS from '@univerjs/presets/preset-docs-core/locales/en-US';
import { UniverWatermarkPlugin } from '@univerjs/watermark';

import '@univerjs/watermark/facade';

import '@univerjs/watermark/lib/index.css';

const { univerAPI } = createUniver({
  locale: LocaleType.EN_US,
  locales: {
    [LocaleType.EN_US]: merge(
      {},
      UniverPresetDocsCoreEnUS,
    ),
  },
  theme: defaultTheme,
  presets: [
    UniverDocsCorePreset(),
  ],
  plugins: [
    UniverWatermarkPlugin,
  ],
});
```

## Piecemeal Installation

```shell npm2yarn
npm install @univerjs/watermark
```

```typescript {3,5,7,14}
import { LocaleType, merge, Univer } from '@univerjs/core';
import { defaultTheme } from "@univerjs/design";
import { UniverWatermarkPlugin } from '@univerjs/watermark';

import '@univerjs/watermark/facade';

import '@univerjs/watermark/lib/index.css';

const univer = new Univer({
  theme: defaultTheme,
  locale: LocaleType.EN_US,
});

univer.registerPlugin(UniverWatermarkPlugin);
```

## Config

```typescript
univer.registerPlugin(UniverWatermarkPlugin, {
  textWatermarkSettings: {
    content: "Univer",
  }
})
```

Detailed configuration can be found on [GitHub](https://github.com/dream-num/univer/blob/dev/packages/watermark/src/controllers/config.schema.ts#L24).

## Facade API 

### Add Watermark

```typescript
univerAPI.addWatermark("text", { content: "hello", repeat: true })
```

### Delete Watermark

```typescript
univerAPI.deleteWatermark();
```

## Links

* [API reference](https://github.com/dream-num/univer/blob/dev/packages/facade/src/apis/facade.ts#L555)
