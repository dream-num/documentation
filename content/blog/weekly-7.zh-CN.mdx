---
title: "Univer å‘¨æŠ¥ #7"
author: ç™½ç†±
date: 2025-07-31
---

import { RainbowButton } from '@/components/magicui/rainbow-button'

å¦‚æœ Univer å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè¯·è€ƒè™‘åœ¨ GitHub ä¸Šç»™æˆ‘ä»¬ç‚¹ä¸ªæ˜Ÿã€‚ä½ çš„æ”¯æŒå°†å¸®åŠ©æˆ‘ä»¬ç»§ç»­æ”¹è¿›å’Œç»´æŠ¤ Univerã€‚

<a href="https://github.com/dream-num/univer" target="_blank" rel="noopener noreferrer">
  <RainbowButton variant="outline">â­ï¸ åœ¨ GitHub ä¸Šç‚¹ä¸ªæ˜Ÿ</RainbowButton>
</a>

---

## Univer v0.10.0 & v0.10.1

### `mergeLocales`ï¼šç®€åŒ–å¤šè¯­è¨€åŒ…åˆå¹¶

åœ¨ Univer v0.10.0 & v0.10.1 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†æ–°çš„ [`mergeLocales`](/guides/sheets/getting-started/i18n#mergeLocales) æ–¹æ³•ã€‚ç”¨äºåˆå¹¶å¤šä¸ªè¯­è¨€åŒ…å¯¹è±¡ã€‚ç›¸æ¯”ä»¥å¾€æ‰‹åŠ¨è°ƒç”¨ `merge` è¿›è¡Œåˆå¹¶ï¼Œ`mergeLocales` è®©ä½ æ— éœ€å†å…³å¿ƒåº•å±‚çš„åˆå¹¶ç»†èŠ‚ï¼Œåªéœ€ä¸“æ³¨äºä¼ å…¥éœ€è¦åˆå¹¶çš„è¯­è¨€åŒ…å³å¯ï¼Œå¤§å¹…æå‡äº†å›½é™…åŒ–å¼€å‘çš„ä¾¿æ·æ€§å’Œä»£ç å¯è¯»æ€§ã€‚

å¯¹äºä¹‹å‰ä½¿ç”¨ `merge` æ–¹æ³•çš„é¡¹ç›®ï¼Œå»ºè®®æŒ‰å¦‚ä¸‹æ–¹å¼ä¿®æ”¹ä»£ç ï¼š

<Tabs items={['é¢„è®¾æ¨¡å¼', 'æ’ä»¶æ¨¡å¼']}>
  <Tab>
    ```diff
    - import { merge } from '@univerjs/presets';
    + import { mergeLocales } from '@univerjs/presets';

    const univer = new Univer({
      locale: LocaleType.ZH_CN,
      locales: {
    -   [LocaleType.ZH_CN]: merge(
    -   {},
    +   [LocaleType.ZH_CN]: mergeLocales(
          DesignZhCN,
          UIZhCN,
          DocsUIZhCN,
          SheetsZhCN,
          SheetsUIZhCN,
          SheetsFormulaUIZhCN,
          SheetsNumfmtUIZhCN,
        ),
      },
    })
    ```
  </Tab>
  <Tab>
    ```diff
    - import { merge } from '@univerjs/core';
    + import { mergeLocales } from '@univerjs/core';

    const univer = new Univer({
      locale: LocaleType.ZH_CN,
      locales: {
    -   [LocaleType.ZH_CN]: merge(
    -   {},
    +   [LocaleType.ZH_CN]: mergeLocales(
          DesignZhCN,
          UIZhCN,
          DocsUIZhCN,
          SheetsZhCN,
          SheetsUIZhCN,
          SheetsFormulaUIZhCN,
          SheetsNumfmtUIZhCN,
        ),
      },
    })
    ```
  </Tab>
</Tabs>

é€šè¿‡ä¸Šè¿°è°ƒæ•´ï¼Œä½ å¯ä»¥ç”¨æ›´æ¸…æ™°çš„æ–¹å¼åˆå¹¶å¤šä¸ªè¯­è¨€åŒ…ï¼Œæ— éœ€å†æ‰‹åŠ¨ä¼ å…¥ç©ºå¯¹è±¡ä½œä¸ºåˆå§‹å‚æ•°ã€‚

### `univer.registerPlugin`ï¼šæ”¯æŒæ‰¹é‡æ³¨å†Œæ’ä»¶

æœ¬æ¬¡æ›´æ–°å¯¹ [`univer.registerPlugin`](/guides/sheets/getting-started/installation#registerPlugin) æ–¹æ³•è¿›è¡Œäº†å¢å¼ºï¼Œç°åœ¨æ”¯æŒä¸€æ¬¡æ€§æ³¨å†Œå¤šä¸ªæ’ä»¶ï¼Œæ— éœ€å¤šæ¬¡å¾ªç¯è°ƒç”¨ï¼Œæå¤§æå‡äº†æ’ä»¶æ³¨å†Œçš„çµæ´»æ€§ä¸æ•ˆç‡ã€‚ä¾‹å¦‚ï¼š

```typescript
univer.registerPlugin([
  UniverRenderEnginePlugin,
  UniverFormulaEnginePlugin,
  [UniverUIPlugin, {
    container: 'app',
  }],
  UniverDocsPlugin,
  UniverDocsUIPlugin,
  UniverSheetsPlugin,
  UniverSheetsUIPlugin,
  UniverSheetsFormulaPlugin,
  UniverSheetsFormulaUIPlugin,
  UniverSheetsNumfmtPlugin,
  UniverSheetsNumfmtUIPlugin,
])
```

é€šè¿‡æ•°ç»„ä¼ é€’æ’ä»¶åˆ—è¡¨ï¼Œå¯ä»¥æ›´ç›´è§‚åœ°ç®¡ç†å’Œç»´æŠ¤æ’ä»¶ä¾èµ–å…³ç³»ã€‚

### ğŸ’” ç ´åæ€§æ›´æ–°ï¼šè‡ªå®šä¹‰æƒé™èƒŒæ™¯ä¸ç”¨æˆ·ç»„ä»¶é…ç½®æ–¹å¼è°ƒæ•´

ä»¥å¾€ï¼Œå¼€å‘è€…éœ€è¦é€šè¿‡ `UniverSheetsUIPlugin` çš„ `customComponents` å±æ€§å®ç°è‡ªå®šä¹‰æƒé™èƒŒæ™¯å’Œç”¨æˆ·ç»„ä»¶ï¼Œè¿™ä¸€æ–¹å¼é…ç½®ç¹çã€ç†è§£é—¨æ§›é«˜ã€‚v0.10.0 ç‰ˆæœ¬å¯¹æ­¤è¿›è¡Œäº†ç ´åæ€§è°ƒæ•´ï¼Œç§»é™¤äº† `customComponents`ï¼Œå¹¶ç”¨æ›´ç›´è§‚çš„ `protectedRangeUserSelector` å’Œ `protectedRangeShadow` æ›¿ä»£ã€‚

å¦‚æœä½ è¿‡å»ä½¿ç”¨äº† `customComponents` å±æ€§æ¥å®ç°è‡ªå®šä¹‰æƒé™èƒŒæ™¯å’Œç”¨æˆ·ç»„ä»¶ï¼Œè¯·å‚è€ƒä»¥ä¸‹ç¤ºä¾‹è¿›è¡Œè¿ç§»ï¼š

**éšè—æƒé™èƒŒæ™¯é˜´å½±**

<Tabs items={['é¢„è®¾æ¨¡å¼', 'æ’ä»¶æ¨¡å¼']}>
  <Tab>
    ```diff
    createUniver({
      presets: [
        UniverSheetsCorePreset({
    -     customComponents: new Set([UNIVER_SHEET_PERMISSION_BACKGROUND]),
    +     sheets: {
    +       protectedRangeShadow: false,
    +     },
        }),
      ],
    })
    ```
  </Tab>
  <Tab>
    ```diff
    univer.registerPlugin(UniverSheetsUIPlugin, {
    -  customComponents: new Set([UNIVER_SHEET_PERMISSION_BACKGROUND]),
    +  protectedRangeShadow: false,
    })
    ```
  </Tab>
</Tabs>

**è‡ªå®šä¹‰ç”¨æˆ·ç»„ä»¶**

<Tabs items={['é¢„è®¾æ¨¡å¼', 'æ’ä»¶æ¨¡å¼']}>
  <Tab>
    ```diff
    - const injector = univer.__getInjector()
    - const uiPartsService = injector.get(IUIPartsService)
    - uiPartsService.registerComponent(UNIVER_SHEET_PERMISSION_USER_PART, () => connectInjector(CustomPermissionDetailUserPart, injector))

    createUniver({
      presets: [
        UniverSheetsCorePreset({
    -     customComponents: new Set([UNIVER_SHEET_PERMISSION_USER_PART]),
    +     sheets: {
    +       protectedRangeUserSelector: {
    +         component: CustomPermissionDetailUserPart,
    +         framework: 'react',
    +       },
    +     },
        }),
      ],
    })
    ```
  </Tab>
  <Tab>
    ```diff
    - const injector = univer.__getInjector()
    - const uiPartsService = injector.get(IUIPartsService)
    - uiPartsService.registerComponent(UNIVER_SHEET_PERMISSION_USER_PART, () => connectInjector(CustomPermissionDetailUserPart, injector))

    univer.registerPlugin(UniverSheetsUIPlugin, {
    -  customComponents: new Set([UNIVER_SHEET_PERMISSION_USER_PART]),
    +  protectedRangeUserSelector: {
    +    component: CustomPermissionDetailUserPart,
    +    framework: 'react',
    +  },
    })
    ```
  </Tab>
</Tabs>

### å…¶ä»–åŠŸèƒ½ä¼˜åŒ–ä¸é—®é¢˜ä¿®å¤

- Univer Slides ç°å·²æ”¯æŒæ’å…¥åœ†å½¢ã€‚æ„Ÿè°¢ç¤¾åŒºè´¡çŒ®è€… [@kenny-not-dead](https://github.com/kenny-not-dead) å¯¹æ­¤åŠŸèƒ½çš„è´¡çŒ®ï¼ˆ[#5602](https://github.com/dream-num/univer/pull/5602)ï¼‰ã€‚
- ä¼˜åŒ–äº†è‡ªå®šä¹‰æ’åºå¼¹çª—çš„é»˜è®¤å¼¹å‡ºä½ç½®ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚
- æŸ¥æ‰¾æ›¿æ¢åŠŸèƒ½å‡çº§ï¼Œç°æ”¯æŒåœ¨è¾“å…¥æ¡†ä¸­ç›´æ¥é€šè¿‡å›è½¦é”®è·³è½¬åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ã€‚
- ä¿®å¤äº†éƒ¨åˆ†è¡¨æ ¼è¿‡æ»¤å™¨ç›¸å…³çš„é—®é¢˜ã€‚
- å…è®¸å¼€å‘è€…åˆ›å»ºè¶…è¿‡å®½åº¦é™åˆ¶çš„ Dialogã€‚

æ›´å¤šè¯¦ç»†çš„æ›´æ–°å†…å®¹å’Œå†å²ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„ [GitHub Releases](https://github.com/dream-num/univer/releases/tag/v0.10.0) é¡µé¢ã€‚

---

æ„Ÿè°¢æ¯ä¸€ä½ç¤¾åŒºå¼€å‘è€…å’Œç”¨æˆ·çš„å…³æ³¨ä¸æ”¯æŒï¼æˆ‘ä»¬å°†æŒç»­ä¼˜åŒ–äº§å“ä½“éªŒï¼Œä¹Ÿæ¬¢è¿å¤§å®¶é€šè¿‡æ–‡æ¡£è¯„ä»·ã€Issue æˆ– Pull Request æå‡ºå®è´µå»ºè®®æˆ–ç›´æ¥å‚ä¸è´¡çŒ®ã€‚è®©æˆ‘ä»¬ä¸€èµ·è®© Univer å˜å¾—æ›´å¥½ï¼
