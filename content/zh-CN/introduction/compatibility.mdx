# 技术栈与兼容性说明

你可以在 [StackShare](https://stackshare.io/dreamnum-inc/univer) 了解我们所使用的技术栈。

## Univer SDK 兼容性

Univer SDK 是指 Univer 中以 TypeScript 编写，以 npm 包的形式发布的代码。Univer SDK 的编译目标是 Chrome 70，但这并不意味着 Univer 能够完全支持所有主流环境。我们会尽力确保 Univer 在以下浏览器和 Node.js 环境中能够正常运行：

| [<img className="mx-auto" src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="Edge" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)Edge | [<img className="mx-auto" src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)Firefox | [<img className="mx-auto" src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)Chrome | [<img className="mx-auto" src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)Safari | [<img className="mx-auto" src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/electron/electron_48x48.png" alt="Electron" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)Electron | [<img className="mx-auto" src="https://nodejs.org/static/logos/jsIconGreen.svg" width="24px" height="24px" />](https://node.js.com)Node.js |
| --------- | --------- | --------- | --------- | --------- | --------- |
| 最近两年 | 最近两年 | 最近两年 | 最近两年 | 最近两年 | v18.17.0 及之后的版本 |

如果遇到无法兼容的情况，请先借助对应的 polyfill 来解决，如果仍然无法解决，请[提交 issue](https://github.com/dream-num/univer/issues/new/choose)。

## SDK 技术栈

| 工具 | 说明 |
| --- | --- |
| TypeScript | SDK 代码完全由 TypeScript 编写，极大地提升了代码可维护性的同时也提升了用户的开发体验。我们使用 typedoc 生成详细的 API 查询手册。我们会定期更新到最新的 TypeScript 版本。 |
| redi | 我们团队自行开发的轻量且强大的依赖注入工具。Univer SDK 使用 redi 来管理内部成百上千的模块，使得代码更容易组织和维护。 |
| Canvas | Univer 使用 Canvas 来渲染文档内容，通过一系列优化极大提升了大文档的性能表现。 |
| React | 我们使用 React 来构建除了文档内容之外的用户界面，诸如工具栏、浮动面板、侧边栏和右键菜单等等。我们支持 16.8.0 及之后版本的 React。 |
| TailwindCSS, Radix | 我们正逐步迁移到 TailwindCSS 和 Radix 以让我们的组件和样式系统能够更加容易定制。我们会持续到最新的版本。 |
| RxJS | RxJS 是我们在代码库中实现反应式编程模式的默认解决方案。我们目前支持 RxJS 7.0.0 及以上版本。 |
| Decimal.js, numfmt | 我们在公式引擎中使用这两个库来解决计算精度和数字格式的问题。 |
| Vitest, Playwright | 我们专注于通过自动化来确保代码质量。我们使用 vitest 进行单元测试和集成测试，使用 playwright 进行 e2e 测试和 vasual 比较测试。 |
| Operational Transformation | 我们使用操作转换来处理并发编辑。我们自研了协同编辑引擎和冲突解决算法。 |
| json1 | 我们在协同模块当中的一部分使用了 json1，主要用于 Univer 文档和幻灯片。 |

## Univer 服务端环境要求

1. 操作系统：Linux、Mac、Windows(WSL)
2. CPU：至少 1 核
3. 内存：至少 2G，如果想支持较大文件的导入导出，建议 >4G
4. 磁盘：至少 10G
5. Docker：23 及以上版本，如果你已经安装了低版本的docker，请先升级；如果没有安装，安装脚本会为你安装docker官方版本
6. 能够访问互联网

## Univer 服务端兼容性

- Linux：建议内核版本 不低于 3.10.0（部分用户在低版本内核下遇到兼容性问题）
- Docker：版本 23 或更高
- Docker Compose：版本 2.21 或更高
- 数据库：
    - MySQL：版本 8.0 或更高
    - PostgreSQL：版本 13 或更高
    - Redis：版本 5.0 或更高

## Univer 服务端技术栈

| 工具 | 说明 |
| --- | --- |
| Go, Python, NestJS, Node.js | Golang 在处理高并发和快速网络 I/O 方面表现出色，让 Univer 协作引擎可以轻松处理大量的客户端连接请求；Python 是目前最流行的 AI 应用开发语言，借助 Python，我们可以采用前沿的框架，快速开发我们的 AI 应用；Node.js 使得我们可以在服务端使用 Univer SDK，让用户能以一套 API 在两个端编写业务逻辑，同时还支持服务端计算、服务端渲染、解决协同编辑冲突等特色功能。 |
| Kubernetes, Docker Compose | 我们的目标是在部署灵活性和易用性之间取得平衡，使客户能够快速启动并开始在系统中集成。为了满足客户的多样化需求，我们同时支持 Kubernetes 和 Docker Compose。 |
| PostgreSQL, Redis, RabbitMQ | 我们的主要存储层组件。 |
| Autogen, Langchain | 我们基于 Autogen 构建了灵活和复杂的 AI 工作流。借助 Langchain 活跃的生态链，我们快速开发了丰富、实用和有趣的 AI 功能。 |
| Sentry | 我们使用 Sentry 收集系统中的错误，以便我们能持续跟进和处理它们。 |
| Prometheus, Grafana, Jaeger, Loki | 我们主要的系统观测工具。 |
| gRPC, Protobuf | 服务之间主要采用 gRPC 作为传输协议，并基于 protoful 文件自动生成不同编程语言的类型定义，以确保全局的一致性。 |
